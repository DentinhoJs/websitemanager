<h1>Cloud System Manager</h1>
<div id="status-container">
  <h2>Status do Servidor: <span id="server-status">Desconhecido</span></h2>
</div>
<div id="controls">
  <button onclick="controlServer('start')">Iniciar</button>
  <button onclick="controlServer('stop')">Parar</button>
  <button onclick="controlServer('restart')">Reiniciar</button>
</div>

<script>
  // Atualizar o status do servidor
  function updateServerStatus() {
    fetch('/api/status')
      .then(response => response.json())
      .then(data => {
        const statusElement = document.getElementById('server-status');
        if (data.status === 'running') {
          statusElement.textContent = 'Online';
          statusElement.style.color = 'green';
        } else if (data.status === 'stopped') {
          statusElement.textContent = 'Offline';
          statusElement.style.color = 'red';
        } else {
          statusElement.textContent = 'Indefinido';
          statusElement.style.color = 'gray';
        }
      })
      .catch(error => {
        console.error('Erro ao obter status:', error);
      });
  }

  // Controle do servidor
  function controlServer(action) {
    fetch(`/api/control/${action}`, {
      method: 'POST',
    })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          alert(`Ação ${action} executada com sucesso.`);
          updateServerStatus();
        } else {
          alert(`Erro ao executar ação: ${data.error}`);
        }
      })
      .catch(error => {
        console.error('Erro ao executar ação:', error);
      });
  }

  // Atualizar status a cada 10 segundos
  setInterval(updateServerStatus, 10000);
  updateServerStatus();
        </script>
